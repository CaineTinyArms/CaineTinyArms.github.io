<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Wordle Clone</title>
  <link rel="stylesheet" href="../CSS/wordle.css">
</head>
<body>
  <div class="header">
    <h1>Wordle Clone</h1>
    <marquee behavior="scroll" direction="left">Aspiring Game Developer</marquee>
  </div>

  <div class="nav">
    <a href="../index.html">Home</a>
    <a href="aboutme.html">About</a>
    <a href="wordle.html">My Games</a>
    <a href="contact.html">Contact</a>
  </div>

  <div class="content">
    <div class="wordle-container">
      
      <h2>Complete this Wordle to access the games page</h2>
      <div id="message"></div>

      <div id="game-container">
        <div class="row">
          <div class="tile" id="0-0"></div>
          <div class="tile" id="0-1"></div>
          <div class="tile" id="0-2"></div>
          <div class="tile" id="0-3"></div>
          <div class="tile" id="0-4"></div>
        </div>
        <div class="row">
          <div class="tile" id="1-0"></div>
          <div class="tile" id="1-1"></div>
          <div class="tile" id="1-2"></div>
          <div class="tile" id="1-3"></div>
          <div class="tile" id="1-4"></div>
        </div>
        <div class="row">
          <div class="tile" id="2-0"></div>
          <div class="tile" id="2-1"></div>
          <div class="tile" id="2-2"></div>
          <div class="tile" id="2-3"></div>
          <div class="tile" id="2-4"></div>
        </div>
        <div class="row">
          <div class="tile" id="3-0"></div>
          <div class="tile" id="3-1"></div>
          <div class="tile" id="3-2"></div>
          <div class="tile" id="3-3"></div>
          <div class="tile" id="3-4"></div>
        </div>
        <div class="row">
          <div class="tile" id="4-0"></div>
          <div class="tile" id="4-1"></div>
          <div class="tile" id="4-2"></div>
          <div class="tile" id="4-3"></div>
          <div class="tile" id="4-4"></div>
        </div>
        <div class="row">
          <div class="tile" id="5-0"></div>
          <div class="tile" id="5-1"></div>
          <div class="tile" id="5-2"></div>
          <div class="tile" id="5-3"></div>
          <div class="tile" id="5-4"></div>
        </div>
      </div>

      <div id="keyboard">
        <button class="key">q</button>
        <button class="key">w</button>
        <button class="key">e</button>
        <button class="key">r</button>
        <button class="key">t</button>
        <button class="key">y</button>
        <button class="key">u</button>
        <button class="key">i</button>
        <button class="key">o</button>
        <button class="key">p</button>

        <button class="key">a</button>
        <button class="key">s</button>
        <button class="key">d</button>
        <button class="key">f</button>
        <button class="key">g</button>
        <button class="key">h</button>
        <button class="key">j</button>
        <button class="key">k</button>
        <button class="key">l</button>

        <button class="key wide-key" id="enter">enter</button>
        <button class="key">z</button>
        <button class="key">x</button>
        <button class="key">c</button>
        <button class="key">v</button>
        <button class="key">b</button>
        <button class="key">n</button>
        <button class="key">m</button>
        <button class="key wide-key" id="backspace">back</button>
      </div>

      <p id="gamesLinkParagraph">
        If you want to just go straight to the games page, click
        <a href="games.html">here</a>.
      </p>

    </div>
  </div>

  <div class="footer">
    <p>&copy; 2025 CaineTinyArms. All Rights Reserved.</p>
  </div>

  <script>
    const WORDS = [
      "abate","adopt","abode","aware","badge","bicep","bluff","board","build","bring",
      "brash","brush","campy","cheek","chest","chalk","clown","crate","crane","crook",
      "ditch","dwell","faint","fetch","ferry","float","fresh","fruit","grade","glass",
      "grain","horse","harsh","alive","alarm","alpha","amuse","agile","alone","alley",
      "align","onion","minus","month","might","night","proxy","scaly","shady","shelf",
      "shift","shrug","slyly","smile","spare","spice","spree","stack","stage","stale",
      "start","steak","steel","steep","sneer","swirl","toxic","twist","token","trace",
      "today","until","voice","watch","weird","witty","yield","young","yearn","zesty",
      "admit","quilt","quick","agent","again","spore","share","shame","media","mania",
      "llama","short","phone","realm","petty","nails","slice","slick","totem","unify"
    ];

    const solution = WORDS[Math.floor(Math.random() * WORDS.length)];
    console.log("Solution (for debugging):", solution);

    let currentRow = 0;
    let currentCol = 0;
    let isGameOver = false;

    document.addEventListener("keydown", (e) => {
      if (isGameOver) return;
      if (e.key === "Enter") {
        checkRow();
      } else if (e.key === "Backspace") {
        deleteLetter();
      } else if (/^[a-z]$/i.test(e.key)) {
        addLetter(e.key.toLowerCase());
      }
    });

    const keys = document.querySelectorAll(".key");
    keys.forEach((key) => {
      key.addEventListener("click", () => {
        if (isGameOver) return;
        const keyValue = key.textContent.toLowerCase();

        if (key.id === "enter") {
          checkRow();
        } else if (key.id === "backspace") {
          deleteLetter();
        } else {
          addLetter(keyValue);
        }
      });
    });

    function addLetter(letter) {
      if (currentCol < 5 && currentRow < 6) {
        const tile = document.getElementById(`${currentRow}-${currentCol}`);
        tile.textContent = letter;
        currentCol++;
      }
    }

    function deleteLetter() {
      if (currentCol > 0) {
        currentCol--;
        const tile = document.getElementById(`${currentRow}-${currentCol}`);
        tile.textContent = "";
      }
    }

    function checkRow() {
      if (currentCol < 5) {
        setMessage("Not enough letters!");
        return;
      }

      let guess = "";
      for (let c = 0; c < 5; c++) {
        guess += document.getElementById(`${currentRow}-${c}`).textContent;
      }

      if (!WORDS.includes(guess)) {
        setMessage("Word not in list!");
        return;
      }

      const guessArray = guess.split("");
      const solutionArray = solution.split("");

      const solutionLetterCount = {};
      solutionArray.forEach((letter) => {
        solutionLetterCount[letter] = (solutionLetterCount[letter] || 0) + 1;
      });

      for (let i = 0; i < 5; i++) {
        const tile = document.getElementById(`${currentRow}-${i}`);
        const letter = guessArray[i];
        if (solutionArray[i] === letter) {
          tile.classList.add("correct");
          solutionLetterCount[letter]--;
        }
      }

      for (let i = 0; i < 5; i++) {
        const tile = document.getElementById(`${currentRow}-${i}`);
        const letter = guessArray[i];
        if (!tile.classList.contains("correct")) {
          if (solutionLetterCount[letter] && solutionLetterCount[letter] > 0) {
            tile.classList.add("present");
            solutionLetterCount[letter]--;
          } else {
            tile.classList.add("absent");
          }
        }
      }

      if (guess === solution) {
        setMessage("Good Job, transferring you to the games page!");
        isGameOver = true;
        setTimeout(() => {
          window.location.href = "games.html";
        }, 3000);
      } else {
        if (currentRow >= 5) {
          setMessage(`You Suck! The word was "${solution}". You must now click the loser link in order to see the games page.`);
          isGameOver = true;

          const linkPara = document.getElementById("gamesLinkParagraph");
          linkPara.innerHTML = '<a href="games.html">LOSER LINK</a>';

        } else {
          currentRow++;
          currentCol = 0;
        }
      }
    }

    function setMessage(msg) {
      document.getElementById("message").textContent = msg;
    }
  </script>
</body>
</html>
